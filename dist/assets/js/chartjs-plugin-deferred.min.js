/*
 * @license
 * chartjs-plugin-deferred
 * http://chartjs.org/
 * Version: 1.0.1
 *
 * Copyright 2018 Simon Brunel
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-deferred/blob/master/LICENSE.md
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],t):t(e.Chart)}(this,(function(e){"use strict";var t=(e=e&&e.hasOwnProperty("default")?e.default:e).helpers,n="$chartjs_deferred",r="$deferred";function a(e,n){n?window.setTimeout(e,n):t.requestAnimFrame.call(window,e)}function o(e,t){var n=parseInt(e,10);return isNaN(n)?0:"string"==typeof e&&-1!==e.indexOf("%")?n/100*t:n}function i(e){var t=e[r].options,n=e.chart.canvas;if(!n||null===n.offsetParent)return!1;var a=n.getBoundingClientRect(),i=o(t.yOffset||0,a.height),d=o(t.xOffset||0,a.width);return a.right-d>=0&&a.bottom-i>=0&&a.left+d<=window.innerWidth&&a.top+i<=window.innerHeight}function d(e){var t=e.target[n];t.ticking||(t.ticking=!0,a((function(){var e,n,a=t.charts.slice(),o=a.length;for(n=0;n<o;++n)i(e=a[n])&&(l(e),e[r].appeared=!0,e.update());t.ticking=!1})))}function f(e){if(e.nodeType===Node.ELEMENT_NODE){var n=t.getStyle(e,"overflow-x"),r=t.getStyle(e,"overflow-y");return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r}return e.nodeType===Node.DOCUMENT_NODE}function l(e){e[r].elements.forEach((function(r){var a=r[n].charts;a.splice(a.indexOf(e),1),a.length||(t.removeEvent(r,"scroll",d),delete r[n])})),e[r].elements=[]}e.defaults.global.plugins.deferred={xOffset:0,yOffset:0,delay:0},e.plugins.register({id:"deferred",beforeInit:function(e,a){e[r]={options:a,appeared:!1,delayed:!1,loaded:!1,elements:[]},function(e){for(var a,o,i=e.chart.canvas.parentElement;i;)f(i)&&(0===(o=(a=i[n]||(i[n]={})).charts||(a.charts=[])).length&&t.addEvent(i,"scroll",d),o.push(e),e[r].elements.push(i)),i=i.parentElement||i.ownerDocument}(e)},beforeDatasetsUpdate:function(e,t){var n=e[r];if(!n.loaded){if(!n.appeared&&!i(e))return!1;if(n.appeared=!0,n.loaded=!0,l(e),t.delay>0)return n.delayed=!0,a((function(){n.delayed=!1,e.update()}),t.delay),!1}if(n.delayed)return!1},destroy:function(e){l(e)}})}));